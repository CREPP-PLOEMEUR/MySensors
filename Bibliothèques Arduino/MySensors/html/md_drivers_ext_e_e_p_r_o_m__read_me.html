<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>My Project: Arduino External EEPROM Library v3.4</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">My Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Arduino External EEPROM Library v3.4 </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>Original library by <a href="http://github.com/JChristensen/extEEPROM">http://github.com/JChristensen/extEEPROM</a></p>
<h1><a class="anchor" id="autotoc_md9"></a>
Introduction</h1>
<p><b>Arduino External EEPROM Library</b></p>
<p>This library will work with most I2C serial EEPROM chips between 2k bits and 2048k bits (2M bits) in size. Multiple EEPROMs on the bus are supported as a single address space. I/O across block, page and device boundaries is supported. Certain assumptions are made regarding the EEPROM device addressing. These assumptions should be true for most EEPROMs but there are exceptions, so read the datasheet and know your hardware.</p>
<p>The library should also work for EEPROMs smaller than 2k bits, assuming that there is only one EEPROM on the bus and also that the user is careful to not exceed the maximum address for the EEPROM.</p>
<p>The <b><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a> Library</b> has been tested with:</p><ul>
<li>Microchip 24AA02E48 (2k bit)</li>
<li>24xx32 (32k bit, thanks to Richard M)</li>
<li>Microchip 24LC256 (256k bit)</li>
<li>Microchip 24FC1026 (1M bit, thanks to Gabriele B on the Arduino forum)</li>
<li>ST Micro M24M02 (2M bit)</li>
<li>Atmel AT24C256C (32k x 8, thanks to Searobin)</li>
</ul>
<p>The <b><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a> Library</b> will <b>NOT</b> work with Microchip 24xx1025 as its control byte does not conform to the following assumptions.</p>
<p><b>Device addressing assumptions:</b></p><ul>
<li>The I2C address sequence consists of a control byte followed by one address byte (for EEPROMs &lt;= 16k bits) or two address bytes (for EEPROMs &gt; 16k bits).</li>
<li>The three least-significant bits in the control byte (excluding the R/W bit) comprise the three most-significant bits for the entire address space, i.e. all chips on the bus. As such, these may be chip-select bits or block-select bits (for individual chips that have an internal block organization), or a combination of both (in which case the block-select bits must be of lesser significance than the chip-select bits).</li>
<li>Regardless of the number of bits needed to address the entire address space, the three most-significant bits always go in the control byte. Depending on EEPROM device size, this may result in one or more of the most significant bits in the I2C address bytes being unused (or "don't care" bits).</li>
<li>An EEPROM contains an integral number of pages.</li>
</ul>
<p>Note that the Arduino Wire library has a buffer size of 32 bytes. This limits the size of physical I/Os that can be done to EEPROM. For writes, one or two bytes are used for the address, so writing is therefore limited to 31 or 30 bytes. Because the <b><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a> Library</b> will handle I/O across block, page and device boundaries, the only consequence this has for the user is one of efficiency; arbitrarily large blocks of data can be written and read; however, carefully chosen block sizes may reduce the number of physical I/Os needed.</p>
<h1><a class="anchor" id="autotoc_md10"></a>
Installation</h1>
<h2><a class="anchor" id="autotoc_md11"></a>
Install with the Library Manager</h2>
<ul>
<li>For Arduino IDE versions 1.6.2 and up, add library by selecting "Manage Libraries..." from the "Include Library" submenu within the Sketch menu.</li>
<li>The library manager will open and you will find a list of libraries that are already installed or ready for installation. Scroll the list to find <b><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a></b> library and click on it.<ul>
<li>Select the version of the library you want to install.</li>
<li>Click on install and wait for the IDE to install the new library. Downloading may take time depending on your connection speed.</li>
<li>Once it has finished, an Installed tag should appear, You can close the library manager.</li>
</ul>
</li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
Manual Install</h2>
<ul>
<li>Go to <a href="http://github.com/PaoloP74/extEEPROM,">http://github.com/PaoloP74/extEEPROM,</a> click the <b>Download ZIP</b> button and save the ZIP file to a convenient location on your PC.</li>
<li>Uncompress the downloaded file. This will result in a folder containing all the files for the library, that has a name that includes the branch name, usually <b>extEEPROM-master</b>.</li>
<li>Rename the folder to just <b><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a></b>.</li>
<li>Copy the renamed folder to the Arduino sketchbook\libraries folder.</li>
</ul>
<h1><a class="anchor" id="autotoc_md13"></a>
Examples</h1>
<p>The following example sketch is included with the <b><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a> Library</b>:</p><ul>
<li><b>eepromReadWrite</b></li>
<li><b>eepromTest:</b> Writes 32-bit integers to the entire EEPROM address space, starting at address 0 and continuing to the topmost address. These are then read back in and verified; any discrepancies are reported to the serial monitor.</li>
<li><b>eepromTest_Wire1</b> </li>
</ul>
<h1><a class="anchor" id="autotoc_md14"></a>
Usage notes</h1>
<p>The <b><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a> Library</b> is designed for use with Arduino version 1.0 or later.</p>
<p>To use the <b><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a> Library</b>, the standard <a href="http://arduino.cc/en/Reference/Wire">Arduino Wire library</a> must also be included. For brevity, this include is not repeated in the examples below: </p><div class="fragment"><div class="line"> {c++}</div>
<div class="line">#include &lt;Wire.h&gt;         //http://arduino.cc/en/Reference/Wire (included with Arduino IDE)</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md15"></a>
Enumerations</h1>
<h2><a class="anchor" id="autotoc_md16"></a>
eeprom_size_t</h2>
<h4><a class="anchor" id="autotoc_md17"></a>
Description</h4>
<p>EEPROM device size in k-bits. Many manufacturers' EEPROM part numbers are designated in k-bits. </p>
<h4><a class="anchor" id="autotoc_md18"></a>
Values</h4>
<ul>
<li>kbits_2</li>
<li>kbits_4</li>
<li>kbits_8</li>
<li>kbits_16</li>
<li>kbits_32</li>
<li>kbits_64</li>
<li>kbits_128</li>
<li>kbits_256</li>
<li>kbits_512</li>
<li>kbits_1024</li>
<li>kbits_2048 </li>
</ul>
<h2><a class="anchor" id="autotoc_md19"></a>
twiClockFreq_t</h2>
<h4><a class="anchor" id="autotoc_md20"></a>
Description</h4>
<p>I2C bus speed. </p>
<h4><a class="anchor" id="autotoc_md21"></a>
Values</h4>
<ul>
<li><a class="el" href="classext_e_e_p_r_o_m.html#a4723dffea0f2e07bf39f532c135c07b5a1afaf7b08b6b5e1681afb903ed52cf16" title="twiClock100kHz">extEEPROM::twiClock100kHz</a></li>
<li><a class="el" href="classext_e_e_p_r_o_m.html#a4723dffea0f2e07bf39f532c135c07b5a53858a604dc4432b52affe32fafe894a" title="twiClock400kHz">extEEPROM::twiClock400kHz</a></li>
</ul>
<h1><a class="anchor" id="autotoc_md22"></a>
Constructor</h1>
<h2><a class="anchor" id="autotoc_md23"></a>
extEEPROM(eeprom_size_t devCap, byte nDev, unsigned int pgSize, byte busAddr)</h2>
<h4><a class="anchor" id="autotoc_md24"></a>
Description</h4>
<p>Instantiates an external EEPROM object. </p>
<h4><a class="anchor" id="autotoc_md25"></a>
Syntax</h4>
<p><code><a class="el" href="classext_e_e_p_r_o_m.html">extEEPROM</a> myEEPROM(eeprom_size_t devCap, byte nDev, unsigned int pgSize, byte busAddr);</code> </p>
<h4><a class="anchor" id="autotoc_md26"></a>
Parameters</h4>
<p><b>devCap</b> *(eeprom_size_t)*: The size of one EEPROM device in k-bits. Choose a value from the eeprom_size_t enumeration above. <br  />
 <b>nDev</b> *(byte)*: The number of EEPROM devices on the bus. Note that if there are multiple EEPROM devices on the bus, they must be identical and each must have its address pins strapped properly. <br  />
 <b>pgSize</b> *(unsigned int)*: The EEPROM page size in bytes. Consult the datasheet if you are unsure of the page size. <br  />
 <b>busAddr</b> *(byte)*: The base I2C bus address for the EEPROM(s). 0x50 is a common value and this parameter can be omitted, in which case 0x50 will be used as the default. <br  />
 </p>
<h4><a class="anchor" id="autotoc_md27"></a>
Example</h4>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">extEEPROM myEEPROM(kbits_256, 2, 64);           //two 24LC256 EEPROMS on the bus</div>
<div class="line">extEEPROM oddEEPROM(kbits_8, 1, 16, 0x42);      //an EEPROM with a non-standard I2C address</div>
</div><!-- fragment --><h1><a class="anchor" id="autotoc_md28"></a>
Methods</h1>
<h2><a class="anchor" id="autotoc_md29"></a>
begin(twiClockFreq_t freq, TwoWire *_comm)</h2>
<h4><a class="anchor" id="autotoc_md30"></a>
Description</h4>
<p>Initializes the library. Call this method once in the setup code. begin() does a dummy I/O so that the user may interrogate the return status to ensure the EEPROM is operational. </p>
<h4><a class="anchor" id="autotoc_md31"></a>
Syntax</h4>
<p><code>myEEPROM.begin(twiClockFreq_t freq);</code> or <code>myEEPROM.begin(twiClockFreq_t freq, TwoWire *_comm);</code> </p>
<h4><a class="anchor" id="autotoc_md32"></a>
Parameters</h4>
<p><b>freq</b> *(twiClockFreq_t)*: The desired I2C bus speed, <code><a class="el" href="classext_e_e_p_r_o_m.html#a4723dffea0f2e07bf39f532c135c07b5a1afaf7b08b6b5e1681afb903ed52cf16" title="twiClock100kHz">extEEPROM::twiClock100kHz</a></code> or <code><a class="el" href="classext_e_e_p_r_o_m.html#a4723dffea0f2e07bf39f532c135c07b5a53858a604dc4432b52affe32fafe894a" title="twiClock400kHz">extEEPROM::twiClock400kHz</a></code>. Can be omitted in which case it will default to <code>twiClock100kHz</code>. <b>NOTE:</b> When using 400kHz, if there are other devices on the bus they must all support a 400kHz bus speed. <b>Secondly</b>, the other devices should be initialized first, as other libraries may not support adjusting the bus speed. To ensure the desired speed is set, call the <a class="el" href="classext_e_e_p_r_o_m.html#af53c2ec38584ba4eae5ca29a86fe5713" title="begin()">extEEPROM.begin()</a> function <em>after</em> initializing all other I2C devices.</p>
<p>**_comm** *(<a class="el" href="class_two_wire.html">TwoWire</a> * )*: The Used I2C <a class="el" href="class_two_wire.html">TwoWire</a> channel . Can be omitted in which case it will default to the first Arduino I2C channel <code>Wire</code>. If another of the possible I2C channel is used its pointer shall be passed as parameter. <b>NOTE:</b> If another I2C channel is unse, and not the default one, the first parameters <b>freq</b> MUST be defined. </p>
<h4><a class="anchor" id="autotoc_md33"></a>
Returns</h4>
<p>I2C I/O status, zero if successful *(byte)*. See the <a href="http://arduino.cc/en/Reference/WireEndTransmission">Arduino Wire.endTransmission() function</a> for a description of other return codes.</p>
<h4><a class="anchor" id="autotoc_md34"></a>
Examples</h4>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">extEEPROM myEEPROM(kbits_256, 2, 64);</div>
<div class="line">byte i2cStat = myEEPROM.begin(extEEPROM::twiClock400kHz);</div>
<div class="line">if ( i2cStat != 0 ) {</div>
<div class="line">    //there was a problem</div>
<div class="line">}</div>
</div><!-- fragment --><h4><a class="anchor" id="autotoc_md35"></a>
Use of other I2C channel</h4>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">extEEPROM myEEPROM(kbits_256, 2, 64);</div>
<div class="line">byte i2cStat = myEEPROM.begin(extEEPROM::twiClock400kHz, &amp;Wire1);</div>
<div class="line">if ( i2cStat != 0 ) {</div>
<div class="line">    //there was a problem</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md36"></a>
write(unsigned long addr, byte *values, unsigned int nBytes)</h2>
<h4><a class="anchor" id="autotoc_md37"></a>
Description</h4>
<p>Write one or more bytes to external EEPROM. </p>
<h4><a class="anchor" id="autotoc_md38"></a>
Syntax</h4>
<p><code>myEEPROM.write(unsigned long addr, byte* values, byte nBytes);</code> </p>
<h4><a class="anchor" id="autotoc_md39"></a>
Parameters</h4>
<p><b>addr</b> *(unsigned long)*: The beginning EEPROM location to write. <br  />
 <b>values</b> _(byte*)_: Pointer to an array containing the data to write. <br  />
 <b>nBytes</b> *(unsigned int)*: The number of bytes to write. <br  />
 </p>
<h4><a class="anchor" id="autotoc_md40"></a>
Returns</h4>
<p>I2C I/O status, zero if successful *(byte)*. See the <a href="http://arduino.cc/en/Reference/WireEndTransmission">Arduino Wire.endTransmission() function</a> for a description of other return codes. Returns a status of EEPROM_ADDR_ERR if the I/O would extend past the top of the EEPROM address space. </p>
<h4><a class="anchor" id="autotoc_md41"></a>
Example</h4>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">byte myData[10];</div>
<div class="line">//write 10 bytes starting at location 42</div>
<div class="line">byte i2cStat = myEEPROM.write(42, &amp;data, 10);</div>
<div class="line">if ( i2cStat != 0 ) {</div>
<div class="line">    //there was a problem</div>
<div class="line">    if ( i2cStat == EEPROM_ADDR_ERR) {</div>
<div class="line">        //bad address</div>
<div class="line">    }</div>
<div class="line">    else {</div>
<div class="line">        //some other I2C error</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md42"></a>
write(unsigned long addr, byte value)</h2>
<h4><a class="anchor" id="autotoc_md43"></a>
Description</h4>
<p>Writes a single byte to external EEPROM. </p>
<h4><a class="anchor" id="autotoc_md44"></a>
Syntax</h4>
<p><code>myEEPROM.write(unsigned long addr, byte value);</code> </p>
<h4><a class="anchor" id="autotoc_md45"></a>
Parameters</h4>
<p><b>addr</b> *(unsigned long)*: The EEPROM location to write. <br  />
 <b>values</b> _(byte)_: The value to write. <br  />
 </p>
<h4><a class="anchor" id="autotoc_md46"></a>
Returns</h4>
<p>Same as multiple-byte write() above. </p>
<h4><a class="anchor" id="autotoc_md47"></a>
Example</h4>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">//write the value 16 to EEPROM location 314.</div>
<div class="line">byte i2cStat = myEEPROM.write(314, 16);</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md48"></a>
read(unsigned long addr, byte *values, unsigned int nBytes)</h2>
<h4><a class="anchor" id="autotoc_md49"></a>
Description</h4>
<p>Reads one or more bytes from external EEPROM into an array supplied by the caller. </p>
<h4><a class="anchor" id="autotoc_md50"></a>
Syntax</h4>
<p><code>myEEPROM.read(unsigned long addr, byte *values, byte nBytes);</code> </p>
<h4><a class="anchor" id="autotoc_md51"></a>
Parameters</h4>
<p><b>addr</b> *(unsigned long)*: The beginning EEPROM location to read from. <br  />
 <b>values</b> _(byte*)_: Pointer to an array to receive the data. <br  />
 <b>nBytes</b> *(unsigned int)*: The number of bytes to read. <br  />
 </p>
<h4><a class="anchor" id="autotoc_md52"></a>
Returns</h4>
<p>I2C I/O status, zero if successful *(byte)*. See the <a href="http://arduino.cc/en/Reference/WireEndTransmission">Arduino Wire.endTransmission() function</a> for a description of other return codes. Returns a status of EEPROM_ADDR_ERR if the I/O would extend past the top of the EEPROM address space. </p>
<h4><a class="anchor" id="autotoc_md53"></a>
Example</h4>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">byte myData[10];</div>
<div class="line">//read 10 bytes starting at location 42</div>
<div class="line">byte i2cStat = myEEPROM.read(42, &amp;data, 10);</div>
<div class="line">if ( i2cStat != 0 ) {</div>
<div class="line">    //there was a problem</div>
<div class="line">    if ( i2cStat == EEPROM_ADDR_ERR) {</div>
<div class="line">        //bad address</div>
<div class="line">    }</div>
<div class="line">    else {</div>
<div class="line">        //some other I2C error</div>
<div class="line">    }</div>
<div class="line">}</div>
</div><!-- fragment --><h2><a class="anchor" id="autotoc_md54"></a>
read(unsigned long addr)</h2>
<h4><a class="anchor" id="autotoc_md55"></a>
Description</h4>
<p>Reads a single byte from external EEPROM. </p>
<h4><a class="anchor" id="autotoc_md56"></a>
Syntax</h4>
<p><code>myEEPROM.read(unsigned long addr);</code> </p>
<h4><a class="anchor" id="autotoc_md57"></a>
Parameters</h4>
<p><b>addr</b> *(unsigned long)*: The EEPROM location to read from. </p>
<h4><a class="anchor" id="autotoc_md58"></a>
Returns</h4>
<p>The data read from EEPROM or an error code *(int)*. To distinguish error values from valid data, error values are returned as negative numbers. See the <a href="http://arduino.cc/en/Reference/WireEndTransmission">Arduino Wire.endTransmission() function</a> for a description of return codes. Returns a status of EEPROM_ADDR_ERR if the I/O would extend past the top of the EEPROM address space. </p>
<h4><a class="anchor" id="autotoc_md59"></a>
Example</h4>
<div class="fragment"><div class="line"> {c++}</div>
<div class="line">int myData;</div>
<div class="line">//read a byte from location 42</div>
<div class="line">int readValue = myEEPROM.read(42);</div>
<div class="line">if ( readValue &lt; 0 ) {</div>
<div class="line">    //there was a problem</div>
<div class="line">    if ( -readValue == EEPROM_ADDR_ERR) {</div>
<div class="line">        //bad address</div>
<div class="line">    }</div>
<div class="line">    else {</div>
<div class="line">        //some other I2C error</div>
<div class="line">    }</div>
<div class="line">}</div>
<div class="line">else {</div>
<div class="line">    //data read ok </div>
<div class="line">}</div>
</div><!-- fragment --><p>"Arduino External EEPROM Library" by Jack Christensen is licensed under <a href="http://creativecommons.org/licenses/by-sa/4.0/">CC BY-SA 4.0</a>. <img src="http://mirrors.creativecommons.org/presskit/buttons/80x15/png/by-sa.png" alt="CC BY-SA" class="inline"/> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.17
</small></address>
</body>
</html>
